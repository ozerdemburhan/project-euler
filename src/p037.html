<!DOCTYPE html>
<head>
	<script src="helper.js"></script>
	<style type="text/css">
		body {
			font-family: monospace;
			font-size: 16px;
		}
		
	</style>
	<title>Test</title>	
	<meta charset="utf-8">
</head>

<body>
</body>

<script>
	var primes = [];
	start();


	function start() {
		primes = preparePrimes(100000);

		var sum = 0;
		var start = 10;
		var count = 0;

		while(count < 11) {
			var s = getSerie(start);
			if(checkSerie(s)) {
				count++;
				sum += start;
				log("truncatable", start);
			}

			start++;
		}

		log("sum", sum);
	}

	function checkSerie(s) {
		var prime = true;
		for(var i = 0; i < s.length; i++) {
			prime = prime && isPrime(s[i]);
		}

		return prime;
	}

	function getSerie(n) {
		var result = [];
		var s = String(n);

		for(var i = 0; i < s.length; i++) {
			result.push(s.substr(i));
		}

		for(var i = 1; i < s.length; i++) {
			result.push(s.substring(0, i));
		}

		return result;
	}


	function isPrime(n) {
		if(n < 2) {
			return false;
		}

		var sqrt = Math.floor(Math.sqrt(n));
		var prime = true;

		for(var i = 0; primes[i] <= sqrt; i++) {
			prime = prime && (n % primes[i] != 0);
		}

		return prime;
	}



</script>


</html>