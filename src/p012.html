<!DOCTYPE html>
<head>
	<style type="text/css">
		body {
			font-family: monospace;
			font-size: 16px;
		}
		
	</style>
	<title>Test</title>	
	<meta charset="utf-8">
</head>


<body>
</body>

<script>
	start();

	function start() {
//		var divisors = findDivisors(28);
//		log("divisors", JSON.stringify(divisors));
//		var divisorsCount = getDivisorsCount(divisors);
//		log("divisors count", divisorsCount);

//		var n = 1;
//		var divisors = findDivisors(n);
//		while(getDivisorsCount(divisors) < 500) {
//			divisors = findDivisors(triangle(++n));
//		}

//		log("n", n);
//		log("count", getDivisorsCount(divisors));
//		log("divisors", JSON.stringify(divisors));

		var n = 1;
		var sum = 1;
		var tr = findDivisors(n);
		
		while(getDivisorsCount(tr) < 500) {
			n++;
			sum += n;
			tr = findDivisors(sum);
		}

		log("n", sum);
		var count = getDivisorsCount(findDivisors(sum));
		log("count", count);
		log("divisors", JSON.stringify(tr));
	}

	function triangle(n) {
		var sum = 0;

		for(var i = 1; i <= n; i++) {
			sum += i;
		}

		return sum;
	}

	function findDivisors(n) {
		var divisors = {};

		for(var i = 2; i <= n; i++) {
			if(n % i == 0) {
				var value = divisors[i];

				if(!value) {
					value = 0;
				}

				divisors[i] = ++value;
				n /= i;
				i--;
			}
		}

		return divisors;
	}

	function getDivisorsCount(obj) {
		var count = 1;

		for(var i in obj) {
			count *= obj[i] + 1;
		}

		return count;
	}

	function log(text, value) {
		document.write(text + ": " + value + "<br>");
	}

</script>



</html>