<!DOCTYPE html>
<head>
	<script src="helper.js"></script>
	<style type="text/css">
		body {
			font-family: monospace;
			font-size: 16px;
		}
		
	</style>
	<title>Test</title>	
	<meta charset="utf-8">
</head>

<body>
</body>

<script>
	var primes = [];

	start();

	function start1() {
		preparePrimes();

		var i = 197
		var circles = getCircles(i);
		var prime = true;

		for(var j = 0; j < circles.length; j++) {
			log("circles[" + j + "]", circles[j]);
			prime &= isPrime(circles[j]);
		}

		if(prime) {
			log("prime", i);
		}		
	}

	function start() {
		preparePrimes();
		var count = 0;

		for(var i = 2; i < 1000000; i++) {
			var circles = getCircles(i);
			var prime = true;

			for(var j = 0; j < circles.length; j++) {
				prime &= isPrime(circles[j]);
			}

			if(prime) {
				count++;
			}
		} 

		log("count", count);
	}

	function getCircles(n) {
		var list = [];
		var s = String(n);
		var last = s.length - 1;

		for(var i = 0; i < s.length; i++) {
			s = s.substr(last, 1) + s.substring(0, s.length - 1);
			list.push(s);
		}

		return list;
	}

	function isPrime(n) {
		var sqrt = Math.floor(Math.sqrt(n));
		var prime = true;

		for(var i = 0; i < primes.length; i++) {
			if(sqrt < primes[i]) {
				return prime;
			}

			prime = prime && (n % primes[i] != 0);
		}

		return prime;
	}

	function preparePrimes() {
		for(var i = 2; i < 1000; i++) {
			var prime = true;

			for(var j = 0; j < primes.length; j++) {
				if(i <= primes[j]) {
					break;
				}

				prime &= (i % primes[j] != 0);
			}

			if(prime) {
				primes.push(i);
			}
		}

		log("primes", primes);
		log("count", primes.length);
	}

</script>


</html>